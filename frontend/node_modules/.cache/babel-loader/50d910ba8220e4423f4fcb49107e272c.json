{"remainingRequest":"/home/bdafflon/Documents/PE/GMP-PE/frontend/node_modules/babel-loader/lib/index.js!/home/bdafflon/Documents/PE/GMP-PE/frontend/node_modules/eslint-loader/index.js??ref--13-0!/home/bdafflon/Documents/PE/GMP-PE/frontend/src/store/index.js","dependencies":[{"path":"/home/bdafflon/Documents/PE/GMP-PE/frontend/src/store/index.js","mtime":1604651989783},{"path":"/home/bdafflon/Documents/PE/GMP-PE/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1604581624534},{"path":"/home/bdafflon/Documents/PE/GMP-PE/frontend/node_modules/babel-loader/lib/index.js","mtime":1604581624086},{"path":"/home/bdafflon/Documents/PE/GMP-PE/frontend/node_modules/eslint-loader/index.js","mtime":1604581624894}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCBmcm9tICd2dWV4JzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuLi9yb3V0ZXInOwppbXBvcnQgY3JlYXRlUGVyc2lzdGVkU3RhdGUgZnJvbSAndnVleC1wZXJzaXN0ZWRzdGF0ZSc7ClZ1ZS51c2UoVnVleCk7CmV4cG9ydCBkZWZhdWx0IG5ldyBWdWV4LlN0b3JlKHsKICBwbHVnaW5zOiBbY3JlYXRlUGVyc2lzdGVkU3RhdGUoKV0sCiAgc3RhdGU6IHsKICAgIGFwaXVybDogJycsCiAgICBhY2Nlc3NUb2tlbjogbnVsbCwKICAgIGxvZ2dpbmdJbjogZmFsc2UsCiAgICBsb2dpbkVycm9yOiBudWxsLAogICAgbG9nZ2VkOiBudWxsLAogICAgdXNlcjogbnVsbCwKICAgIHB3ZDogIiIKICB9LAogIGdldHRlcnM6IHsKICAgIGxvZ2dlZDogZnVuY3Rpb24gbG9nZ2VkKHN0YXRlKSB7CiAgICAgIGNvbnNvbGUuZGVidWcoc3RhdGUubG9nZ2VkKTsKICAgICAgcmV0dXJuIHN0YXRlLmxvZ2dlZDsKICAgIH0sCiAgICBhcGl1cmw6IGZ1bmN0aW9uIGFwaXVybChzdGF0ZSkgewogICAgICBjb25zb2xlLmRlYnVnKHN0YXRlLmxvZ2dlZCk7CiAgICAgIHJldHVybiBzdGF0ZS5hcGl1cmw7CiAgICB9LAogICAgdXNlcjogZnVuY3Rpb24gdXNlcihzdGF0ZSkgewogICAgICBjb25zb2xlLmRlYnVnKHN0YXRlLmxvZ2dlZCk7CiAgICAgIHJldHVybiBzdGF0ZS51c2VyOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBsb2dvdXRNOiBmdW5jdGlvbiBsb2dvdXRNKHN0YXRlKSB7CiAgICAgIHN0YXRlLmxvZ2dlZCA9IGZhbHNlOwogICAgICBzdGF0ZS5hY2Nlc3NUb2tlbiA9IG51bGw7CiAgICAgIHN0YXRlLnVzZXIgPSBudWxsOwogICAgfSwKICAgIHNldFVzZXI6IGZ1bmN0aW9uIHNldFVzZXIoc3RhdGUsIHVzZXIpIHsKICAgICAgc3RhdGUudXNlciA9IHVzZXI7CiAgICB9LAogICAgc2V0TG9nZ2VkOiBmdW5jdGlvbiBzZXRMb2dnZWQoc3RhdGUsIG0pIHsKICAgICAgY29uc29sZS5kZWJ1ZyhtKTsKICAgICAgc3RhdGUubG9nZ2VkID0gbTsKICAgIH0sCiAgICBzZXRQd2Q6IGZ1bmN0aW9uIHNldFB3ZChzdGF0ZSwgbSkgewogICAgICBjb25zb2xlLmRlYnVnKG0pOwogICAgICBzdGF0ZS51c2VyLnB3ZCA9IG07CiAgICB9LAogICAgc2V0QVBJOiBmdW5jdGlvbiBzZXRBUEkoc3RhdGUsIG0pIHsKICAgICAgY29uc29sZS5kZWJ1ZyhtKTsKICAgICAgc3RhdGUuYXBpdXJsID0gbTsKICAgIH0sCiAgICBsb2dpblN0YXJ0OiBmdW5jdGlvbiBsb2dpblN0YXJ0KHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5sb2dnaW5nSW4gPSB0cnVlOwogICAgfSwKICAgIGxvZ2luU3RvcDogZnVuY3Rpb24gbG9naW5TdG9wKHN0YXRlLCBlcnJvck1lc3NhZ2UpIHsKICAgICAgc3RhdGUubG9nZ2luZ0luID0gZmFsc2U7CiAgICAgIHN0YXRlLmxvZ2luRXJyb3IgPSBlcnJvck1lc3NhZ2U7CiAgICB9LAogICAgdXBkYXRlQWNjZXNzVG9rZW46IGZ1bmN0aW9uIHVwZGF0ZUFjY2Vzc1Rva2VuKHN0YXRlLCBhY2Nlc3NUb2tlbikgewogICAgICBzdGF0ZS5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIGNvbnNvbGUuZGVidWcoImxvZ291dCBhY3Rpb24iKTsKICAgICAgY29tbWl0KCdsb2dvdXRNJyk7CiAgICAgIHJvdXRlci5wdXNoKCIvIik7CiAgICB9LAogICAgZG9Mb2dpbjogZnVuY3Rpb24gZG9Mb2dpbihfcmVmMiwgbG9naW5EYXRhKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgIGNvbW1pdCgnbG9naW5TdGFydCcpOwogICAgICB2YXIgYXBpID0gJzEyNy4wLjAuMTo1MDAwJzsKICAgICAgY29tbWl0KCdzZXRBUEknLCBhcGkpOwogICAgICBjb25zb2xlLmRlYnVnKCJhcGkgOiIgKyBhcGkpOwogICAgICBheGlvcy5wb3N0KGFwaSArICcvYXBpL3Rva2VuJywge30sIHsKICAgICAgICBhdXRoOiB7CiAgICAgICAgICB1c2VybmFtZTogbG9naW5EYXRhLmVtYWlsLAogICAgICAgICAgcGFzc3dvcmQ6IGxvZ2luRGF0YS5wYXNzd29yZAogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzVG9rZW4nLCByZXNwb25zZS5kYXRhLnRva2VuKTsKICAgICAgICBjb21taXQoJ2xvZ2luU3RvcCcsIG51bGwpOwogICAgICAgIGNvbW1pdCgnc2V0TG9nZ2VkJywgdHJ1ZSk7CiAgICAgICAgY29tbWl0KCdzZXRVc2VyJywgcmVzcG9uc2UuZGF0YS51c2VyKTsKICAgICAgICBjb21taXQoJ3NldFB3ZCcsIGxvZ2luRGF0YS5wYXNzd29yZCk7CiAgICAgICAgY29tbWl0KCd1cGRhdGVBY2Nlc3NUb2tlbicsIHJlc3BvbnNlLmRhdGEudG9rZW4pOwogICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSByZXNwb25zZS5kYXRhLnRva2VuOwogICAgICAgIHJvdXRlci5wdXNoKCIvIik7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbW1pdCgnbG9naW5TdG9wJywgZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcik7CiAgICAgICAgY29tbWl0KCd1cGRhdGVBY2Nlc3NUb2tlbicsIG51bGwpOwogICAgICB9KTsKICAgIH0sCiAgICBmZXRjaEFjY2Vzc1Rva2VuOiBmdW5jdGlvbiBmZXRjaEFjY2Vzc1Rva2VuKF9yZWYzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgIGNvbW1pdCgndXBkYXRlQWNjZXNzVG9rZW4nLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKSk7CiAgICB9CiAgfQp9KTs="},{"version":3,"sources":["/home/bdafflon/Documents/PE/GMP-PE/frontend/src/store/index.js"],"names":["Vue","Vuex","axios","router","createPersistedState","use","Store","plugins","state","apiurl","accessToken","loggingIn","loginError","logged","user","pwd","getters","console","debug","mutations","logoutM","setUser","setLogged","m","setPwd","setAPI","loginStart","loginStop","errorMessage","updateAccessToken","actions","logout","commit","push","doLogin","loginData","api","post","auth","username","email","password","then","response","localStorage","setItem","data","token","defaults","headers","common","catch","error","fetchAccessToken","getItem"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\nimport router from '../router'\nimport createPersistedState from 'vuex-persistedstate'\n\nVue.use(Vuex)\n\n\nexport default new Vuex.Store({\n  plugins: [createPersistedState()],\n  state: {\n    apiurl:'',\n    accessToken: null,\n    loggingIn: false,\n    loginError: null,\n    logged:null,\n    user:null,\n    pwd:\"\"\n  },\n  getters: {\n    logged: state => {\n      console.debug(state.logged)\n      return state.logged\n    },\n    apiurl: state => {\n      console.debug(state.logged)\n      return state.apiurl\n    },\n    user: state => {\n      console.debug(state.logged)\n      return state.user\n    }},\n  mutations: {\n    logoutM:(state)=>{\n      state.logged=false;\n      state.accessToken=null;\n      state.user=null;\n    },\n    setUser: (state,user)=>{\n      state.user = user\n    },\n    setLogged: (state, m) => {\n      console.debug(m)\n      state.logged = m;\n    },\n    setPwd: (state, m) => {\n      console.debug(m)\n      state.user.pwd = m;\n    },\n    setAPI: (state, m) => {\n      console.debug(m)\n      state.apiurl = m;\n    },\n    loginStart: state => state.loggingIn = true,\n    loginStop: (state, errorMessage) => {\n      state.loggingIn = false;\n      state.loginError = errorMessage;\n    },\n    updateAccessToken: (state, accessToken) => {\n      state.accessToken = accessToken;\n    }\n  },\n  actions: {\n    logout({ commit }){\n      console.debug(\"logout action\")\n      commit('logoutM')\n      router.push(\"/\")\n    },\n    doLogin({ commit }, loginData) {\n      commit('loginStart');\n      var api='127.0.0.1:5000'\n      commit('setAPI',api)\n      console.debug(\"api :\"+api)\n      axios.post(api+'/api/token', {}, {\n        auth: {\n          username: loginData.email,\n          password: loginData.password\n        }\n      })\n      .then(response => {\n        localStorage.setItem('accessToken', response.data.token);\n        commit('loginStop', null);\n        commit('setLogged', true);\n        commit('setUser',response.data.user)\n        commit('setPwd',loginData.password);\n        commit('updateAccessToken', response.data.token);\n        axios.defaults.headers.common['Authorization'] = response.data.token\n        router.push(\"/\")\n         \n      })\n      .catch(error => {\n        commit('loginStop', error.response.data.error);\n        commit('updateAccessToken', null);\n      })\n    },\n    fetchAccessToken({ commit }) {\n      commit('updateAccessToken', localStorage.getItem('accessToken'));\n    }\n  }\n})\n"]}]}