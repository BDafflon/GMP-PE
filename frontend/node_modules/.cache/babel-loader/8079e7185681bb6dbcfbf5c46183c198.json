{"remainingRequest":"/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/node_modules/babel-loader/lib/index.js!/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/src/components/ChatComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/src/components/ChatComponent.vue","mtime":1604344206536},{"path":"/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1604307644635},{"path":"/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/node_modules/babel-loader/lib/index.js","mtime":1604307644331},{"path":"/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1604307644635},{"path":"/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/node_modules/vue-loader/lib/index.js","mtime":1604307646123}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvYmRhZmZsb24vRG9jdW1lbnRzL1BFL1BFLWdpdDIvR01QLVBFL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDaGF0IiwKICBwcm9wczogWydjYW5kaWRhdHVyZSddLAogIHdhdGNoOiB7CiAgICAvLyBUaGlzIHdvdWxkIGJlIGNhbGxlZCBhbnl0aW1lIHRoZSB2YWx1ZSBvZiB0aXRsZSBjaGFuZ2VzCiAgICBjYW5kaWRhdHVyZTogZnVuY3Rpb24gY2FuZGlkYXR1cmUobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIGNvbnNvbGUuZGVidWcob2xkVmFsdWUpOwogICAgICB0aGlzLmNhbmRpZGF0dXJlID0gbmV3VmFsdWU7CiAgICAgIHRoaXMuY2xlYXJBbGxNZXNzYWdlcygpOwogICAgICB0aGlzLmZldGNoRGF0YSgpOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJvYk1lc3NhZ2U6ICcnLAogICAgICB5b3VNZXNzYWdlOiAnJywKICAgICAgbWVzc2FnZXM6IFt7CiAgICAgICAgaWQ6IDEsCiAgICAgICAgYm9keTogJ1dlbGNvbWUgdG8gdGhlIGNoYXQsIElcJ20gQm9iIScsCiAgICAgICAgYXV0aG9yOiAnYm9iJwogICAgICB9LCB7CiAgICAgICAgaWQ6IDIsCiAgICAgICAgYm9keTogJ1RoYW5rIHlvdSBCb2InLAogICAgICAgIGF1dGhvcjogMQogICAgICB9LCB7CiAgICAgICAgaWQ6IDMsCiAgICAgICAgYm9keTogJ1lvdVwncmUgbW9zdCB3ZWxjb21lJywKICAgICAgICBhdXRob3I6ICdib2InCiAgICAgIH1dCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKFsnbG9nZ2luZ0luJywgJ2xvZ2luRXJyb3InLCAnYWNjZXNzVG9rZW4nLCAnbG9nZ2VkJywgJ3VzZXInXSkpLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoRGF0YSgpOwogIH0sCiAgbWV0aG9kczogewogICAgc2Nyb2xsVG9FbmQ6IGZ1bmN0aW9uIHNjcm9sbFRvRW5kKCkgewogICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2NoYXRyb29tIik7CiAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AgPSBjb250YWluZXIuc2Nyb2xsSGVpZ2h0OwogICAgfSwKICAgIHNlbmRNZXNzYWdlOiBmdW5jdGlvbiBzZW5kTWVzc2FnZShkaXJlY3Rpb24pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUuZGVidWcodGhpcy5tZXNzYWdlcyk7CgogICAgICBpZiAoIXRoaXMueW91TWVzc2FnZSAmJiAhdGhpcy5ib2JNZXNzYWdlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoZGlyZWN0aW9uID09PSAnb3V0JykgewogICAgICAgIHRoaXMuYWRkRGF0YSh0aGlzLnlvdU1lc3NhZ2UpOwogICAgICAgIHRoaXMueW91TWVzc2FnZSA9ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCdzb21ldGhpbmcgd2VudCB3cm9uZycpOwogICAgICB9CgogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnNjcm9sbFRvRW5kKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGNsZWFyQWxsTWVzc2FnZXM6IGZ1bmN0aW9uIGNsZWFyQWxsTWVzc2FnZXMoKSB7CiAgICAgIHRoaXMubWVzc2FnZXMgPSBbXTsKICAgIH0sCiAgICBhZGREYXRhOiBmdW5jdGlvbiBhZGREYXRhKG1lc3NhZ2UpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBjb25zb2xlLmRlYnVnKG1lc3NhZ2UpOwogICAgICBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgdXJsOiAnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2FwaS9hY3Rpb25wZS9yZWdpc3RyYXRpb24nLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIGFjdGlvbjogbWVzc2FnZSwKICAgICAgICAgIGlkX2V0dWRpYW50OiB0aGlzLnVzZXIuaWQsCiAgICAgICAgICBpZF9jYW5kaWRhdHVyZTogdGhpcy5jYW5kaWRhdHVyZS5pZF9jYW5kaWRhdHVyZQogICAgICAgIH0sCiAgICAgICAgYXV0aDogewogICAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlci5tYWlsLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMudXNlci5wd2QKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLm1lc3NhZ2VzLnB1c2goewogICAgICAgICAgaWRfYWN0aW9uOiByZXNwb25zZS5pZF9hY3Rpb24sCiAgICAgICAgICBhY3Rpb246IG1lc3NhZ2UsCiAgICAgICAgICBpZF9ldHVkaWFudDogX3RoaXMyLnVzZXIuaWQsCiAgICAgICAgICBpZF9jYW5kaWRhdHVyZTogX3RoaXMyLmNhbmRpZGF0dXJlLmlkX2NhbmRpZGF0dXJlCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZGVidWcoZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBmZXRjaERhdGE6IGZ1bmN0aW9uIGZldGNoRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjUwMDAvYXBpL2FjdGlvbnBlLycgKyB0aGlzLmNhbmRpZGF0dXJlLmlkX2NhbmRpZGF0dXJlLAogICAgICAgIGF1dGg6IHsKICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXIubWFpbCwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnVzZXIucHdkCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5tZXNzYWdlcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgX3RoaXMzLmNhbmRpZGF0dXJlLmFwID0gMDsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5kZWJ1ZyhlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ChatComponent.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div>\n      <section ref=\"chatArea\" class=\"chat-area\" id=\"chatroom\" >\n    <p v-for=\"message in messages\" :key=\"message.id_action\" class=\"message\" :class=\"{ 'message-out': message.id_etudiant === user.id, 'message-in': message.id_etudiant !== user.id }\">\n      {{ message.action }}\n    </p>\n  </section>\n   <section class=\"\">\n\n    \n\n    <form @submit.prevent=\"sendMessage('out')\" id=\"person2-form\">\n        <div class=\"row\">\n          <div class=\"col-sm-8\">\n             <input v-model=\"youMessage\" type=\"text\" id=\"person2-input\" class=\"form-control\" placeholder=\"Message\" required autofocus>\n          </div>\n          <div class=\"col-sm-4\">\n            <button class=\"btn  btn-primary btn-block\" type=\"submit\">Envoyer</button>\n          </div>\n        </div>\n      \n        \n      \n    </form>\n  </section>\n</div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport axios from 'axios';\n\nexport default {\n    name:\"Chat\",\n    props: ['candidature'],\n    watch: {\n    // This would be called anytime the value of title changes\n      candidature(newValue, oldValue) {\n        console.debug(oldValue)\n        this.candidature = newValue\n        this.clearAllMessages()\n        this.fetchData()\n    }\n  },\n    data() {\n      return {\n        bobMessage: '',\n        youMessage: '',\n        messages: [\n          { \n            id:1,\n            body: 'Welcome to the chat, I\\'m Bob!',\n            author: 'bob'\n          },\n          {\n            id:2,\n            body: 'Thank you Bob',\n            author: 1\n          },\n          {\n            id:3,\n            body: 'You\\'re most welcome',\n            author: 'bob'\n          }\n        ]\n      }\n    },\n    computed: {\n      ...mapState([\n        'loggingIn',\n        'loginError',\n        'accessToken',\n        'logged',\n        'user'\n      ])\n    },\n    created () {\n      this.fetchData()\n    },\n  methods: {\n    scrollToEnd: function() {    \t\n      \n      var container = document.querySelector(\"#chatroom\");\n      container.scrollTop = container.scrollHeight;\n    },\n    sendMessage(direction) {\n      console.debug(this.messages)\n      if (!this.youMessage && !this.bobMessage) {\n        return\n      }\n      if (direction === 'out') {\n        \n\n        this.addData(this.youMessage)\n        this.youMessage = ''\n      \n      } else {\n        alert('something went wrong')\n      }\n      \n      this.$nextTick(() => this.scrollToEnd());\n    },\n    clearAllMessages() {\n      this.messages = []\n    }\n  ,\n  addData(message){\n    console.debug(message)\n    axios({\n            method: 'post',\n            url: 'http://127.0.0.1:5000/api/actionpe/registration',\n            data: {\n              action:message,\n              id_etudiant:this.user.id,\n              id_candidature:this.candidature.id_candidature\n            },\n            auth: {\n              username: this.user.mail,\n              password: this.user.pwd\n            }\n        })\n      .then(response => {\n          \n         this.messages.push({id_action:response.id_action, action:message,\n              id_etudiant:this.user.id,\n              id_candidature:this.candidature.id_candidature})\n         \n         \n          \n      })\n      .catch(error => {\n        console.debug(error)\n      })\n  },\n  fetchData () {\n          \n      \n      axios({\n            method: 'get',\n            url: 'http://127.0.0.1:5000/api/actionpe/'+this.candidature.id_candidature,\n            auth: {\n              username: this.user.mail,\n              password: this.user.pwd\n            }\n        })\n      .then(response => {\n          \n         this.messages=response.data\n         this.candidature.ap=0\n         \n         \n          \n      })\n      .catch(error => {\n        console.debug(error)\n      })\n\n    }\n  }\n\n}\n</script>\n\n<style lang=\"scss\">\n   \n  @import \"../assets/custom.scss\";\n  @import \"node_modules/bootstrap/scss/bootstrap.scss\";\n  @import \"../assets/sb-admin-2.min.css\";\n\n\n.chat-area {\n/*   border: 1px solid #ccc; */\n  background: white;\n  max-height: 30vh;\n  padding: 1em;\n  overflow: auto;\n   \n  margin: 0 auto 2em auto;\n  }\n.message {\n  width: 50%;\n  border-radius: 10px;\n  padding: .5em;\n/*   margin-bottom: .5em; */\n  font-size: .8em;\n}\n.message-out {\n  background: #407FFF;\n  color: white;\n  margin-left: 50%;\n  text-align: right;\n}\n.message-in {\n  background: #F1F0F0;\n  color: black;\n  text-align: left;\n}\n.chat-inputs {\n  display: flex;\n  justify-content: space-between;\n}\n</style>"],"sourceRoot":"src/components"}]}