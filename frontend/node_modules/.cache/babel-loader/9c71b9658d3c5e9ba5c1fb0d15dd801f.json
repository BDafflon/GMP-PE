{"remainingRequest":"/home/bdafflon/Documents/PE/PE-GIT/GMP-PE/frontend/node_modules/babel-loader/lib/index.js!/home/bdafflon/Documents/PE/PE-GIT/GMP-PE/frontend/node_modules/eslint-loader/index.js??ref--13-0!/home/bdafflon/Documents/PE/PE-GIT/GMP-PE/frontend/src/store/index.js","dependencies":[{"path":"/home/bdafflon/Documents/PE/PE-GIT/GMP-PE/frontend/src/store/index.js","mtime":1603997175205},{"path":"/home/bdafflon/Documents/PE/PE-GIT/GMP-PE/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/bdafflon/Documents/PE/PE-GIT/GMP-PE/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/bdafflon/Documents/PE/PE-GIT/GMP-PE/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCBmcm9tICd2dWV4JzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuLi9yb3V0ZXInOwppbXBvcnQgY3JlYXRlUGVyc2lzdGVkU3RhdGUgZnJvbSAndnVleC1wZXJzaXN0ZWRzdGF0ZSc7ClZ1ZS51c2UoVnVleCk7CmV4cG9ydCBkZWZhdWx0IG5ldyBWdWV4LlN0b3JlKHsKICBwbHVnaW5zOiBbY3JlYXRlUGVyc2lzdGVkU3RhdGUoKV0sCiAgc3RhdGU6IHsKICAgIGFjY2Vzc1Rva2VuOiBudWxsLAogICAgbG9nZ2luZ0luOiBmYWxzZSwKICAgIGxvZ2luRXJyb3I6IG51bGwsCiAgICBsb2dnZWQ6IG51bGwsCiAgICB1c2VyOiBudWxsLAogICAgcHdkOiAiIgogIH0sCiAgZ2V0dGVyczogewogICAgbG9nZ2VkOiBmdW5jdGlvbiBsb2dnZWQoc3RhdGUpIHsKICAgICAgY29uc29sZS5kZWJ1ZyhzdGF0ZS5sb2dnZWQpOwogICAgICByZXR1cm4gc3RhdGUubG9nZ2VkOwogICAgfSwKICAgIHVzZXI6IGZ1bmN0aW9uIHVzZXIoc3RhdGUpIHsKICAgICAgY29uc29sZS5kZWJ1ZyhzdGF0ZS5sb2dnZWQpOwogICAgICByZXR1cm4gc3RhdGUudXNlcjsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgbG9nb3V0TTogZnVuY3Rpb24gbG9nb3V0TShzdGF0ZSkgewogICAgICBzdGF0ZS5sb2dnZWQgPSBmYWxzZTsKICAgICAgc3RhdGUuYWNjZXNzVG9rZW4gPSBudWxsOwogICAgICBzdGF0ZS51c2VyID0gbnVsbDsKICAgIH0sCiAgICBzZXRVc2VyOiBmdW5jdGlvbiBzZXRVc2VyKHN0YXRlLCB1c2VyKSB7CiAgICAgIHN0YXRlLnVzZXIgPSB1c2VyOwogICAgfSwKICAgIHNldExvZ2dlZDogZnVuY3Rpb24gc2V0TG9nZ2VkKHN0YXRlLCBtKSB7CiAgICAgIGNvbnNvbGUuZGVidWcobSk7CiAgICAgIHN0YXRlLmxvZ2dlZCA9IG07CiAgICB9LAogICAgc2V0UHdkOiBmdW5jdGlvbiBzZXRQd2Qoc3RhdGUsIG0pIHsKICAgICAgY29uc29sZS5kZWJ1ZyhtKTsKICAgICAgc3RhdGUudXNlci5wd2QgPSBtOwogICAgfSwKICAgIGxvZ2luU3RhcnQ6IGZ1bmN0aW9uIGxvZ2luU3RhcnQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmxvZ2dpbmdJbiA9IHRydWU7CiAgICB9LAogICAgbG9naW5TdG9wOiBmdW5jdGlvbiBsb2dpblN0b3Aoc3RhdGUsIGVycm9yTWVzc2FnZSkgewogICAgICBzdGF0ZS5sb2dnaW5nSW4gPSBmYWxzZTsKICAgICAgc3RhdGUubG9naW5FcnJvciA9IGVycm9yTWVzc2FnZTsKICAgIH0sCiAgICB1cGRhdGVBY2Nlc3NUb2tlbjogZnVuY3Rpb24gdXBkYXRlQWNjZXNzVG9rZW4oc3RhdGUsIGFjY2Vzc1Rva2VuKSB7CiAgICAgIHN0YXRlLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgY29uc29sZS5kZWJ1ZygibG9nb3V0IGFjdGlvbiIpOwogICAgICBjb21taXQoJ2xvZ291dE0nKTsKICAgICAgcm91dGVyLnB1c2goIi8iKTsKICAgIH0sCiAgICBkb0xvZ2luOiBmdW5jdGlvbiBkb0xvZ2luKF9yZWYyLCBsb2dpbkRhdGEpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgY29tbWl0KCdsb2dpblN0YXJ0Jyk7CiAgICAgIGF4aW9zLnBvc3QoJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9hcGkvdG9rZW4nLCB7fSwgewogICAgICAgIGF1dGg6IHsKICAgICAgICAgIHVzZXJuYW1lOiBsb2dpbkRhdGEuZW1haWwsCiAgICAgICAgICBwYXNzd29yZDogbG9naW5EYXRhLnBhc3N3b3JkCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY2Nlc3NUb2tlbicsIHJlc3BvbnNlLmRhdGEudG9rZW4pOwogICAgICAgIGNvbW1pdCgnbG9naW5TdG9wJywgbnVsbCk7CiAgICAgICAgY29tbWl0KCdzZXRMb2dnZWQnLCB0cnVlKTsKICAgICAgICBjb21taXQoJ3NldFVzZXInLCByZXNwb25zZS5kYXRhLnVzZXIpOwogICAgICAgIGNvbW1pdCgnc2V0UHdkJywgbG9naW5EYXRhLnBhc3N3b3JkKTsKICAgICAgICBjb21taXQoJ3VwZGF0ZUFjY2Vzc1Rva2VuJywgcmVzcG9uc2UuZGF0YS50b2tlbik7CiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHJlc3BvbnNlLmRhdGEudG9rZW47CiAgICAgICAgcm91dGVyLnB1c2goIi8iKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29tbWl0KCdsb2dpblN0b3AnLCBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgICBjb21taXQoJ3VwZGF0ZUFjY2Vzc1Rva2VuJywgbnVsbCk7CiAgICAgIH0pOwogICAgfSwKICAgIGZldGNoQWNjZXNzVG9rZW46IGZ1bmN0aW9uIGZldGNoQWNjZXNzVG9rZW4oX3JlZjMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgY29tbWl0KCd1cGRhdGVBY2Nlc3NUb2tlbicsIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NUb2tlbicpKTsKICAgIH0KICB9Cn0pOw=="},{"version":3,"sources":["/home/bdafflon/Documents/PE/PE-GIT/GMP-PE/frontend/src/store/index.js"],"names":["Vue","Vuex","axios","router","createPersistedState","use","Store","plugins","state","accessToken","loggingIn","loginError","logged","user","pwd","getters","console","debug","mutations","logoutM","setUser","setLogged","m","setPwd","loginStart","loginStop","errorMessage","updateAccessToken","actions","logout","commit","push","doLogin","loginData","post","auth","username","email","password","then","response","localStorage","setItem","data","token","defaults","headers","common","catch","error","fetchAccessToken","getItem"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\nimport router from '../router'\nimport createPersistedState from 'vuex-persistedstate'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  plugins: [createPersistedState()],\n  state: {\n    accessToken: null,\n    loggingIn: false,\n    loginError: null,\n    logged:null,\n    user:null,\n    pwd:\"\"\n  },\n  getters: {\n    logged: state => {\n      console.debug(state.logged)\n      return state.logged\n    },\n    user: state => {\n      console.debug(state.logged)\n      return state.user\n    }},\n  mutations: {\n    logoutM:(state)=>{\n      state.logged=false;\n      state.accessToken=null;\n      state.user=null;\n    },\n    setUser: (state,user)=>{\n      state.user = user\n    },\n    setLogged: (state, m) => {\n      console.debug(m)\n      state.logged = m;\n    },\n    setPwd: (state, m) => {\n      console.debug(m)\n      state.user.pwd = m;\n    },\n    loginStart: state => state.loggingIn = true,\n    loginStop: (state, errorMessage) => {\n      state.loggingIn = false;\n      state.loginError = errorMessage;\n    },\n    updateAccessToken: (state, accessToken) => {\n      state.accessToken = accessToken;\n    }\n  },\n  actions: {\n    logout({ commit }){\n      console.debug(\"logout action\")\n      commit('logoutM')\n      router.push(\"/\")\n    },\n    doLogin({ commit }, loginData) {\n      commit('loginStart');\n      \n      \n      axios.post('http://127.0.0.1:5000/api/token', {}, {\n        auth: {\n          username: loginData.email,\n          password: loginData.password\n        }\n      })\n      .then(response => {\n        localStorage.setItem('accessToken', response.data.token);\n        commit('loginStop', null);\n        commit('setLogged', true);\n        commit('setUser',response.data.user)\n        commit('setPwd',loginData.password);\n        commit('updateAccessToken', response.data.token);\n        axios.defaults.headers.common['Authorization'] = response.data.token\n        router.push(\"/\")\n         \n      })\n      .catch(error => {\n        commit('loginStop', error.response.data.error);\n        commit('updateAccessToken', null);\n      })\n    },\n    fetchAccessToken({ commit }) {\n      commit('updateAccessToken', localStorage.getItem('accessToken'));\n    }\n  }\n})\n"]}]}