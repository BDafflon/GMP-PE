{"remainingRequest":"/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/node_modules/babel-loader/lib/index.js!/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/node_modules/eslint-loader/index.js??ref--13-0!/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/src/router/index.js","dependencies":[{"path":"/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/src/router/index.js","mtime":1604422339718},{"path":"/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1604307644635},{"path":"/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/node_modules/babel-loader/lib/index.js","mtime":1604307644331},{"path":"/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/node_modules/eslint-loader/index.js","mtime":1604307644951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVlUm91dGVyIGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgSG9tZSBmcm9tICcuLi92aWV3cy9Ib21lLnZ1ZSc7CmltcG9ydCBEYXNoYm9yZCBmcm9tICcuLi92aWV3cy9EYXNoYm9yZC52dWUnOwppbXBvcnQgc3RvcmUgZnJvbSAnLi4vc3RvcmUvaW5kZXguanMnOwppbXBvcnQgRWNvbGUgZnJvbSAnLi4vdmlld3MvRWNvbGUudnVlJzsKaW1wb3J0IExvZ291dCBmcm9tICcuLi92aWV3cy9Mb2dvdXQudnVlJzsKaW1wb3J0IEZvcm1hdGlvbiBmcm9tICcuLi92aWV3cy9Gb3JtYXRpb24udnVlJzsKaW1wb3J0IENhbmRpZGF0dXJlIGZyb20gJy4uL3ZpZXdzL0NhbmRpZGF0dXJlLnZ1ZSc7ClZ1ZS51c2UoVnVlUm91dGVyKTsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogJy8nLAogIG5hbWU6ICdEYXNoYm9yZCcsCiAgY29tcG9uZW50OiBEYXNoYm9yZCwKICBtZXRhOiB7CiAgICByZXF1aXJlc0F1dGg6IHRydWUsCiAgICByZXF1aXJlc0FkbWluOiBmYWxzZQogIH0KfSwgewogIHBhdGg6ICcvZm9ybWF0aW9uLzppZD8nLAogIG5hbWU6ICdGb3JtYXRpb24nLAogIGNvbXBvbmVudDogRm9ybWF0aW9uLAogIG1ldGE6IHsKICAgIHJlcXVpcmVzQXV0aDogdHJ1ZSwKICAgIHJlcXVpcmVzQWRtaW46IGZhbHNlCiAgfQp9LCB7CiAgcGF0aDogJy9sb2dpbicsCiAgbmFtZTogJ0xvZ2luJywKICBjb21wb25lbnQ6IEhvbWUsCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiBmYWxzZSwKICAgIHJlcXVpcmVzQWRtaW46IGZhbHNlCiAgfQp9LCB7CiAgcGF0aDogJy9lY29sZS86aWQ/JywKICBuYW1lOiAnRWNvbGUnLAogIGNvbXBvbmVudDogRWNvbGUsCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiB0cnVlLAogICAgcmVxdWlyZXNBZG1pbjogZmFsc2UKICB9Cn0sIHsKICBwYXRoOiAnL2NhbmRpZGF0dXJlLzppZEM/LzppZEY/JywKICBuYW1lOiAnQ2FuZGlkYXR1cmUnLAogIGNvbXBvbmVudDogQ2FuZGlkYXR1cmUsCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiB0cnVlLAogICAgcmVxdWlyZXNBZG1pbjogZmFsc2UKICB9Cn0sIHsKICBwYXRoOiAnL2xvZ291dCcsCiAgbmFtZTogJ0xvZ291dCcsCiAgY29tcG9uZW50OiBMb2dvdXQsCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiB0cnVlLAogICAgcmVxdWlyZXNBZG1pbjogZmFsc2UKICB9Cn0sIHsKICBwYXRoOiAnL2Fib3V0JywKICBuYW1lOiAnQWJvdXQnLAogIG1ldGE6IHsKICAgIHJlcXVpcmVzQXV0aDogdHJ1ZSwKICAgIHJlcXVpcmVzQWRtaW46IGZhbHNlCiAgfSwKICAvLyByb3V0ZSBsZXZlbCBjb2RlLXNwbGl0dGluZwogIC8vIHRoaXMgZ2VuZXJhdGVzIGEgc2VwYXJhdGUgY2h1bmsgKGFib3V0LltoYXNoXS5qcykgZm9yIHRoaXMgcm91dGUKICAvLyB3aGljaCBpcyBsYXp5LWxvYWRlZCB3aGVuIHRoZSByb3V0ZSBpcyB2aXNpdGVkLgogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgKICAgIC8qIHdlYnBhY2tDaHVua05hbWU6ICJhYm91dCIgKi8KICAgICcuLi92aWV3cy9BYm91dC52dWUnKTsKICB9Cn1dOwp2YXIgcm91dGVyID0gbmV3IFZ1ZVJvdXRlcih7CiAgbW9kZTogJ2hpc3RvcnknLAogIGJhc2U6IHByb2Nlc3MuZW52LkJBU0VfVVJMLAogIHJvdXRlczogcm91dGVzCn0pOwpyb3V0ZXIuYmVmb3JlRWFjaChmdW5jdGlvbiAodG8sIGZyb20sIG5leHQpIHsKICBjb25zb2xlLmRlYnVnKCJyb3V0ZSAiICsgdG8ubmFtZSArICIgZnJvbSIgKyBmcm9tLm5hbWUpOwogIGlmICh0by5uYW1lID09IG51bGwpIG5leHQoewogICAgbmFtZTogJ0xvZ2luJwogIH0pOwoKICBpZiAodG8ubmFtZSA9PSAnTG9naW4nICYmIHN0b3JlLnN0YXRlLmxvZ2dlZCkgewogICAgbmV4dCh7CiAgICAgIG5hbWU6ICdEYXNoYm9yZCcKICAgIH0pOwogIH0KCiAgaWYgKHRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocmVjb3JkKSB7CiAgICByZXR1cm4gcmVjb3JkLm1ldGEucmVxdWlyZXNBdXRoOwogIH0pKSB7CiAgICBjb25zb2xlLmRlYnVnKCJsb2dnZWQgIiArIHN0b3JlLnN0YXRlLmxvZ2dlZCk7IC8vIHRoaXMgcm91dGUgcmVxdWlyZXMgYXV0aCwgY2hlY2sgaWYgbG9nZ2VkIGluCiAgICAvLyBpZiBub3QsIHJlZGlyZWN0IHRvIGxvZ2luIHBhZ2UuCgogICAgaWYgKCFzdG9yZS5nZXR0ZXJzLmxvZ2dlZCkgewogICAgICBjb25zb2xlLmRlYnVnKCJ0byBsb2dnaW4iKTsKICAgICAgbmV4dCh7CiAgICAgICAgbmFtZTogJ0xvZ2luJwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQoKTsgLy8gZ28gdG8gd2hlcmV2ZXIgSSdtIGdvaW5nCiAgICB9CiAgfSBlbHNlIHsKICAgIG5leHQoKTsgLy8gZG9lcyBub3QgcmVxdWlyZSBhdXRoLCBtYWtlIHN1cmUgdG8gYWx3YXlzIGNhbGwgbmV4dCgpIQogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["/home/bdafflon/Documents/PE/PE-git2/GMP-PE/frontend/src/router/index.js"],"names":["Vue","VueRouter","Home","Dashbord","store","Ecole","Logout","Formation","Candidature","use","routes","path","name","component","meta","requiresAuth","requiresAdmin","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","console","debug","state","logged","matched","some","record","getters"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Home from '../views/Home.vue'\nimport Dashbord from '../views/Dashbord.vue'\nimport store from '../store/index.js'\nimport Ecole from '../views/Ecole.vue'\nimport Logout from '../views/Logout.vue'\nimport Formation from '../views/Formation.vue'\nimport Candidature from '../views/Candidature.vue'\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Dashbord',\n    component: Dashbord,\n    meta: {\n      requiresAuth: true,\n      requiresAdmin: false\n    }\n  },\n  {\n    path: '/formation/:id?',\n    name: 'Formation',\n    component: Formation,\n    meta: {\n      requiresAuth: true,\n      requiresAdmin: false\n    }\n  },\n  {\n    path: '/login',\n    name: 'Login',\n    component: Home,\n    meta: {\n      requiresAuth: false,\n      requiresAdmin: false\n    }\n  },\n  {\n    path: '/ecole/:id?',\n    name: 'Ecole',\n    component: Ecole,\n    meta: {\n      requiresAuth: true,\n      requiresAdmin: false\n    }\n  },\n  {\n    path: '/candidature/:idC?/:idF?',\n    name: 'Candidature',\n    component: Candidature,\n    meta: {\n      requiresAuth: true,\n      requiresAdmin: false\n    }\n  },\n  {\n    path: '/logout',\n    name: 'Logout',\n    component: Logout,\n    meta: {\n      requiresAuth: true,\n      requiresAdmin: false\n    }\n  },\n  {\n    path: '/about',\n    name: 'About',\n    meta: {\n      requiresAuth: true,\n      requiresAdmin: false\n    },\n\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/About.vue')\n  }\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\nrouter.beforeEach((to, from, next) => {\n  console.debug(\"route \"+to.name+\" from\"+from.name)\n  if(to.name == null)\n    next({ name: 'Login' })\n  if(to.name == 'Login' && store.state.logged){\n    next({ name: 'Dashbord' })\n  }\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    \n    console.debug(\"logged \"+store.state.logged)\n    // this route requires auth, check if logged in\n    // if not, redirect to login page.\n    if (!store.getters.logged) {\n      console.debug(\"to loggin\")\n      next({ name: 'Login' })\n    } else {\n      next() // go to wherever I'm going\n    }\n  } else {\n    next() // does not require auth, make sure to always call next()!\n  }\n})\n\nexport default router\n"]}]}